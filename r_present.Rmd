---
title: "Oportunidades y limitaciones del an치lisis de texto con R:"
subtitle: "la discograf칤a de Taylor Swift"
author: "Ariane Aumaitre"
institute: "Instituto Universitario Europeo"
date: "14/11/2019"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r xaringan-themer, include = FALSE}
library(xaringanthemer)
library(emo)
duo_accent(
  primary_color = "#F885F8",
  secondary_color = "#060006",
  title_slide_text_color = "#FFFFFF",
  text_bold_color = "#F885F8",
  header_font_google = google_font("Josefin Sans"),
  text_font_google   = google_font("Montserrat", "300", "300i"),
  code_font_google   = google_font("Droid Mono"),
  text_font_size = "25px",
  code_font_size = "0.5em",
  header_h1_font_size = "40px",
  extra_css = list(
    ".title-slide h1" = list(
      "font-size" = "52px",
      "line-height" = "1.1em"),
    ".title-slide h2" = list(
    "margin-top" = "-10px",
    "margin-bottom" = "40px"),
    ".title-slide h3" = list(
    "margin-top" = "40px.",
    "line-height" = "0.3em"),
    ".remark-slide-content" = list(
      "line-height" = "1.1em"),
    ".hljs-github .hljs" = list(
    "background" ="#FCE8FC" )
    )
  )
```
```{css, echo=FALSE}
/* custom.css */
.left-code {
  color: #777;
  width: 60%;
  height: 92%;
  float: left;
}
.right-plot {
  width: 38%;
  float: right;
  padding-left: 1%;
}
}
```


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```



# 쯇or qu칠 an치lisis de texto con R?


.center[`r emo::ji("idea")`]


* Muchos datos hoy en d칤a pueden ser extra칤dos de fuentes de texto

* Por ejemplo, en ciencias sociales: 
  + *Debates parlamentarios, programas electorales, noticias de peri칩dico, tweets...*
  
* **Automatizando el proceso**, el volumen de informaci칩n que podemos analizar es mucho mayor
+ R hace este proceso muy sencillo, especialmente si aplicamos herramientas de **tidy data**.

---
background-image: url(https://www.billboard.com/files/styles/article_main_image/public/media/taylor-swift-the-1989-world-tour-live-in-manchester-2015-billboard-650.jpg)
background-size: 400px
background-position: 110% 90%
class: inverse

# 쯇or qu칠 Taylor Swift?

</br>

* "Artist of the decade" seg칰n los AMAs

* Tiene 10 Grammys

* **M치s de 50 millones de discos** vendidos

* Su nuevo disco, **Lover**, es incre칤ble `r emo::ji("heart")`
</br>
</br>



 ... y porque conozco _muy bien_ sus canciones.

---

# Temas de esta presentaci칩n

* Idea general de c칩mo funciona **tidytext**

* Ejemplos de **preguntas** que podemos contestar mediante an치lisis de texto
* 쮺u치les son las **limitaciones** de esta t칠cnica? 

.center[![](https://media.giphy.com/media/l0K4c8bZHJzDCmg6Y/giphy.gif)]

<small>**Slides, c칩digo y tutorial**: [https://github.com/aaumaitre/taylor_swift](https://github.com/aaumaitre/taylor_swift)</small>


---

# Tidytext

* Un paquete que permite aplicar principios de **"tidy data"** a un corpus de texto

* Una observaci칩n por fila, una variable por columna

* En el caso del **texto** -> cada observaci칩n es la unidad que queramos analizar (palabras? frases?)

* Organizar nuestro texto as칤 nos permite utilizar herramientas de **tidyverse** para el an치lisis

![](https://i.ibb.co/kyMCbQ7/r-first-then.png)
---

# Preparando los datos
```{r, include=FALSE}
load("taytay.Rdata")
library(tidyverse)
```

Esta es la base de datos descargada de Genius:

```{r}
head(tay)
```

---
# Preparando los datos (II)

<small>Con la funci칩n `unnest_tokens()` reducimos la columna `lyric` a nuestra unidad de estudio: las palabras.</small>

```{r, warning = FALSE}
library(tidytext) #Tidytext package
#Tokenizing our data:
tay_tok <- tay%>%
  #word is the new column, lyric the column to retrieve the information from
  unnest_tokens(word, lyric)
head(tay_tok)
```

---
# An치lisis exploratorio


<small>Las palabras m치s repetidas no nos dan mucha informaci칩n... `r emo::ji("sad")` </small>
.left-code[
```{r}
tay_tok %>%
  count(word, sort = TRUE) %>%
  head()
```
]

.right-plot[.center[
</br></br></br></br></br>
![](https://media.tenor.com/images/15cc765f8d2612bec5f7504562f0ed83/tenor.gif)]]
---
# An치lisis exploratorio (II)
<small>
* Una forma de resolver este problema es eliminar las llamadas `palabras vac칤as`, que no aportan significado

* 쮺칩mo? Usando `anti_join()` y el diccionario `stop_words` </small>
.left-code[
```{r, message = FALSE, warning=FALSE}
tidy_taylor <- tay_tok %>%
  anti_join(stop_words)
tidy_taylor %>% 
  count(word, sort = TRUE) %>% head()
```
]
.right-plot[.center[</br></br></br></br>
![](https://media3.giphy.com/media/njP6or65MJ8Na/source.gif)]]

---
class: center, middle
# 춰Ahora s칤!


![](https://camo.githubusercontent.com/bcdbee6b9671023718bd682f0396cfe9dcf43dea/68747470733a2f2f692e6962622e636f2f473552706d79442f696d6167652e706e67)

---
# Aplicaciones: an치lisis de sentimiento

* El **an치lisis de sentimiento** nos permite aproximar las connotaciones subjetivas de los textos analizados

* 쯇redominan emociones positivas o negativas?

* Se lleva a cabo mediante **diccionarios** que aplicamos a nuestro texto 

* **Tidytext** contiene tres diccionarios: _AFINN_, _bing_ y _nrc_. Es importante elegir un diccionario que _tenga sentido_ para el texto con el que estamos trabajando.

* Funciones que utilizaremos: `get_sentiments()` e `inner_join()`

---

# La funci칩n get_sentiments()

````{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))
```


---

# La funci칩n get_sentiments()

```{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))%>% 
  count(album, track_title, sentiment)

```
---

# La funci칩n get_sentiments()

```{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))%>% 
  count(album, track_title, sentiment) %>%
  spread(sentiment, n, fill = 0) %>%
  mutate(sentiment = positive - negative)%>%
  arrange(desc(sentiment))

```
---
class: middle, center

![](https://camo.githubusercontent.com/b19f249906b325580745b5f95848c8209d6aef88/68747470733a2f2f692e6962622e636f2f534266387653712f696d6167652e706e67)

---
# Cuidado con...
</br></br></br>

.left-code[
* Iron칤a

* Dobles sentidos

* La elecci칩n del diccionario

* Es importante comparar resultados
]
.right-plot[
![](https://media.giphy.com/media/WQCL5dzFsMzlrlYIew/giphy.gif)
]


---

# Comparando diccionarios 
.pull-left[
````{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))%>% 
  filter(sentiment == "positive")%>%
  count(album, track_title, sentiment, sort = TRUE)%>%
    select(track_title, n)


```
]
.pull-right[

```{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("nrc"))%>% 
  filter(sentiment == "positive")%>%
  count(album, track_title, sentiment, sort = TRUE)%>%
  select(track_title, n)
```
]
---
# Comprender los resultados (I)

```{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))%>%
  filter(sentiment == "positive")%>%
  count(sentiment, track_title, word, sort = TRUE)%>%
  select(track_title, word, n)
```
---
# Comprender los resultados (II)

```{r, message = FALSE}
tidy_taylor%>%
  inner_join(get_sentiments("bing"))%>%
  filter(sentiment == "negative")%>%
  count(sentiment, track_title, word, sort = TRUE)
``` 
---

# Otras aplicaciones 游눠

</br></br></br>

.left-code[

* Identificar tendencias temporales

* Buscar similitudes o diferencias entre textos

* Topic modelling

* network analysis

]

.right-plot[
![](https://media1.giphy.com/media/W6itv78YBylif0laJ7/source.gif)
]

---

# Ejemplo: relaci칩n entre discos

![](https://camo.githubusercontent.com/cdf20d40b9a72eec49203734cbc0441ddc994961/68747470733a2f2f692e6962622e636f2f7448346b3938732f696d6167652e706e67)

---

# Ejemplo 2: relaci칩n entre canciones

![](https://camo.githubusercontent.com/9d9c2a4a9dba52ad98244143c568af137d6880e4/68747470733a2f2f692e6962622e636f2f31544b707347742f696d6167652e706e67)
---
background-image: url(https://media.npr.org/assets/img/2014/10/30/taylor-swift-sunglasses_wide-4fba842796dcffeb9f5ba5a1498c20e689e05ad9-s800-c85.jpg)